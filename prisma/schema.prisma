generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "postgresql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model Order {
  id                    String    @id @default(uuid())
  userId                String
  order                 String
  estado                String
  tipoInspeccion        String
  fechaProgramada       String
  procesoProduccion     String
  especificacionProceso String
  responsableCT         String
  responsableInspeccion String
  instrumentoMedicion   String
  codigoInstrumento     String
  muestra               String
  cliente               String
  fig                   String
  proyecto              String
  area                  String
  designacion           String
  norma                 String
  lote                  String
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  contacts              Contact[]
  events                Event[]
}

model Contact {
  id        String   @id @default(uuid())
  orderId   String?
  name      String
  role      String
  code      String
  function  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  order     Order?   @relation(fields: [orderId], references: [id], onDelete: Cascade)

  @@index([orderId])
}

model Event {
  id         String   @id @default(uuid())
  orderId    String
  title      String
  start      DateTime
  allDay     Boolean
  timeFormat String
  createdAt  DateTime @default(now())
  updateAt   DateTime @updatedAt
  order      Order    @relation(fields: [orderId], references: [id])

  @@index([orderId])
}
